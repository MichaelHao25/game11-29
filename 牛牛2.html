 <!doctype html>
 <html>
 <head design-width="640">
 	<meta charset="utf-8">
 	<meta name="viewport" content="width=device-width,initial-scale=0.6,minimum-scale=0.6,maximum-scale=0.6">
 	<meta name="apple-mobile-web-app-capable" content="yes">
 	<meta name="apple-mobile-web-app-status-bar-style" content="black">
 	<meta name="format-detection" content="telephone=no">
 	<title>Demo</title>
 	<link rel="stylesheet" href="css/style.css" /><!--页面样式-->
 	<link rel="stylesheet" href="css/example.css">
 	<link rel="stylesheet" href="css/c.css">
 	<script src="js/auto-size.js"></script><!--设置字体大小-->
 	<script src="js/fastclick.js"></script>
 	<script>
 		if ('addEventListener' in document) {
 			document.addEventListener('DOMContentLoaded', function() {
 				FastClick.attach(document.body);
 			}, false);
 		}
 	</script>
 </head>
 <body>

 	<section class="section-init">
 		<div class="room-info">
 			<span>房间号：37095227</span><span>底注：100</span>
 		</div>
 		<div class="table">
 			<div class="row">
 				<div class="user ok small">
 					<div class="base-info">
 						<div class="score"></div>
 						<div class="pic"><img src="img/ico6.png" alt=""></div>
 						<div class="name">放飞的梦想</div>
 						<div class="money">
 							金币<br>300000
 						</div>
 					</div>
 					<div class="win"><img src="img/win.png" alt=""></div>
 					<div class="card">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 					</div>
 				</div>
 			</div>
 			<div class="row">
 				<div class="user ok small">
 					<div class="base-info">
 						<div class="score"></div>
 						<div class="pic"><img src="img/ico6.png" alt=""></div>
 						<div class="name">放飞的梦想</div>
 						<div class="money">
 							金币<br>300000
 						</div>
 					</div>
 					<div class="win"><img src="img/win.png" alt=""></div>
 					<div class="card">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 					</div>
 				</div>
 				<div class="user ok small">
 					<div class="win"><img src="img/win.png" alt=""></div>
 					<div class="card">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 					</div>
 					<div class="base-info">
 						<div class="score"></div>
 						<div class="pic"><img src="img/ico6.png" alt=""></div>
 						<div class="name">放飞的梦想</div>
 						<div class="money">
 							金币<br>300000
 						</div>
 					</div>
 				</div>
 			</div>
 			<div class="row">
 				<div class="user banker small open win-root">
 					<div class="base-info">
 						<div class="score"><img src="img/score2.png" alt="" class="add"><img src="img/score1.png" alt="" class="a785"></div>
 						<div class="pic"><img src="img/ico6.png" alt=""></div>
 						<div class="name">放飞的梦想</div>
 						<div class="money">
 							金币<br>300000
 						</div>
 					</div>
 					<div class="win"><img src="img/win.png" alt=""></div>
 					<div class="card">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 					</div>
 				</div>
 				<div class="user ok small">
 					<div class="win"><img src="img/win.png" alt=""></div>
 					<div class="card">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 					</div>
 					<div class="base-info">
 						<div class="score"><img src="img/score4.png" alt="" class="minus"><img src="img/score3.png" alt="" class="a31"></div>
 						<div class="pic"><img src="img/ico6.png" alt=""></div>
 						<div class="name">放飞的梦想</div>
 						<div class="money">
 							金币<br>300000
 						</div>
 					</div>
 				</div>
 			</div>
 			<div class="row">
 				<div class="user ok boss select-card win-root">
 					<div class="base-info">
 						<div class="score"></div>
 						<div class="pic"><img src="img/ico6.png" alt=""></div>
 						<div class="name">放飞的梦想</div>
 						<div class="money">
 							金币<br>300000
 						</div>
 					</div>
 					<div class="win"><img src="img/win.png" alt=""></div>
 					<div class="card">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 						<img src="img/ico5.png" alt="">
 					</div>
 				</div>
 			</div>
 		</div>
 	</section>
 	<section class="ready hide">
 		<a href="#" class="btn"><img src="img/ready.png" alt=""></a>
 		<div class="ani">
 			<img src="img/ready-ani.png" alt="">
 		</div>
 	</section>
 	<section class="banker hide">
 		<div class="btn-group">
 			<a href="#"><img src="img/banker-btn1.png" alt=""></a>
 			<a href="#"><img src="img/banker-btn2.png" alt=""></a>
 		</div>
 	</section>
 	<section class="down-money hide">
 		<div class="banker">
 			<img src="img/wait.png" alt="">
 		</div>
 		<div class="no-banker btn-group">
 			<a href="#">5倍</a>
 			<a href="#">10倍</a>
 			<a href="#">15倍</a>
 			<a href="#">25倍</a>
 		</div>
 	</section>
 	<section class="resuit hide">
 		<div class="function">
 			<div class="num item"></div>
 			<div class="add">+</div>
 			<div class="num item"></div>
 			<div class="add">+</div>
 			<div class="num item"></div>
 			<div class="add">=</div>
 			<div class="num total"></div>
 		</div>
 		<div class="btn-group">
 			<!-- resuit-layout -->
 			<a href="#" class="yes"><img src="img/resuit1.png" alt=""></a>
 			<a href="#" class="no"><img src="img/resuit2.png" alt=""></a>
 		</div>
 	</section>
 	<section class="game-resuit hide">
 		<div class="win">
 			<img src="img/win-game.png" alt="">
 		</div>
 		<div class="loser">
 			<img src="img/loser.png" alt="">
 		</div>
 	</section>
 	<!-- <div class="card-item spades spades2"><div class="face"></div><div class="topleft">2</div><div class="bottomright">2</div></div> -->
 </body>
 <script src="js/jquery-2.2.4.min.js"></script><!--jQ库-->
 <script>
 	$('.ready .btn').on('click', function() {
 		$(this).fadeOut().siblings('.ani').addClass('ready-ani');
 	});
 	function poker(jokers){
 		this.totalcards = jokers ? 52 : 55;
 		this.cards = this.totalcards;
 		this.SuitName = function(value) {
 			return value === 0 ? 'spades' : value === 1 ? 'hearts' : value === 2 ? 'clubs' : value === 3 ? 'diamonds' : 'joker';
 		}
 		this.initClassname = function(){
 			this.cardsClassName = [];
 			for (var i = 0; i < this.cards; i++) {
 				var num = parseInt(i%13+1)
 				var name = num === 1 ? 'A' : num === 11 ? 'J' : num === 12 ? 'Q' : num === 13 ? 'K' : num.toString()
 				var card = this.SuitName(parseInt(i/13));
 				'joker'==card && (name='J\nO\nK\nE\nR');
 				this.cardsClassName.push([num,name,card]);
 			}
 			console.log(this.cardsClassName);
 		}
 		this.rand = function(max) {
 			return Math.round(Math.random() * max);
 		}
 		this.shuffle = function(){
 			this.cards = this.totalcards;
 			console.log('shuffle complate!');
 			//洗牌完毕
 		}
 		this.sort = function(){
 			var current = this.rand(this.cards-1);
 			var arry = this.cardsClassName.splice(current,1);
 			this.cardsClassName.push(arry[0]);
 			this.cards--<=0&&(console.log('游戏已经平局;'),this.shuffle());
 			return arry;
 		}
 		this.elements = function(){
 			var elements = '';
 			var currentCardInfo = this.sort()[0];

 			elements = '<div class="card-item '+currentCardInfo[2]+currentCardInfo[0]+' '+currentCardInfo[2]+'"><div class="face"></div><div class="topleft">'+currentCardInfo[1]+'</div><div class="bottomright">'+currentCardInfo[1]+'</div></div>'
 			console.log(elements);
 			return elements;
 		}
 		this.append = function(target){
 			var elements = '';
 			for (var i = 0; i < 5; i++) {
 				elements += this.elements();
 			}
 			$(target).html(elements);
 		}
 		this.initClassname();

 	}
 	var c = new poker();
 	c.append('.boss .card');
 	c.append('.open .card');
 	$('.boss .card').on('click', '.card-item', function() {
 		var value = parseInt($(this).parent().attr('data-click'));
 		if (value<3||isNaN(value)) {
 			$(this).toggleClass('select');
 		}else{
 			$(this).hasClass('select')&&$(this).toggleClass('select');
 		}
 		
 	});

 	$('.select-card .card').on('click', function() {
 		// console.log($(this).find('.select').length);
 		var data = [];
 		var dom = $(this).find('.select')
 		var length = $(this).find('.select').length;
 		for (var i = 0; i < length; i++) {
 			var value = $(dom).eq(i).children('.topleft').text()
 			value = value=='A'?1:isNaN(parseInt(value))==true?10:parseInt(value);
 			data.push(value);
 		}
 		$(this).attr('data-click', length);
 		$.each($('section.resuit .function .item'), function(index, val) {
 			$(val).text(typeof(data[index])=='undefined'?' ':data[index]);
 		});
 		if (length==3) {
 			var total = 0;
 			data.forEach(function(value) {
 				total+=value;
 			});
 			$('section.resuit .function .total').text(total);
 			total%10==0?$('section.resuit .btn-group a.yes').addClass('resuit-layout'):$('section.resuit .btn-group a.yes').removeClass('resuit-layout');
			// console.log(total);
		}
 		// console.log(data);
 	});


 </script>
 </html>
